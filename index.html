<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemoChat - Voice & Screen Share</title>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="sidebar" id="sidebar">
            <div class="room-info">
                <h2>ğŸ“ MemoChat</h2>
                <p>Memorable voice chat with enhanced features</p>
            </div>

            <div class="join-form" id="joinForm">
                <input type="text" id="usernameInput" placeholder="Enter your name" maxlength="20">
                <select id="roomSelect" onchange="handleRoomChange()">
                    <option value="">Choose a room...</option>
                    <option value="general">ğŸ  General Chat</option>
                    <option value="gaming">ğŸ® Gaming</option>
                    <option value="study">ğŸ“š Study Group</option>
                    <option value="music">ğŸµ Music & Chill</option>
                    <option value="private">ğŸ”’ Private Room</option>
                    <option value="custom">ğŸ” Password Protected</option>
                </select>
                <input type="password" id="passwordInput" class="password-input" placeholder="Enter room password" maxlength="50">
                <input type="text" id="customRoomInput" class="password-input" placeholder="Custom room ID (optional)" maxlength="20">
                <button class="btn btn-primary" onclick="joinRoom()" style="width: 100%;">Join Voice Chat</button>
                <button class="btn btn-success create-room-btn" onclick="createPrivateRoom()" style="display: none;">Create Password Protected Room</button>
            </div>

            <div class="password-section" id="passwordSection" style="display: none;">
                <h4 style="color: #43b581; margin-bottom: 10px;">ğŸ” Create Private Room</h4>
                <input type="text" id="privateUsername" placeholder="Your name" maxlength="20">
                <input type="password" id="privatePassword" placeholder="Set password (min 4 chars)" maxlength="50">
                <button class="btn btn-success" onclick="createPrivateRoom()" style="width: 100%;">Create Room</button>
            </div>

            <div class="room-id-display" id="roomIdDisplay" style="display: none;">
                <h4>Room Created!</h4>
                <p style="font-size: 11px; margin-bottom: 5px;">Share this info with friends:</p>
                <div class="room-id-text" id="roomIdText"></div>
                <button class="btn btn-primary" onclick="copyRoomInfo()" style="width: 100%; margin-top: 8px; font-size: 11px;">Copy Room Info</button>
            </div>

            <div class="volume-controls" id="volumeControls">
                <h4>ğŸ”Š Audio Controls</h4>
                <div class="volume-control">
                    <label>Input:</label>
                    <input type="range" id="inputVolume" min="0" max="100" value="100" oninput="updateInputVolume(this.value)">
                    <span id="inputVolumeValue">100%</span>
                </div>
                <div class="volume-control">
                    <label>Output:</label>
                    <input type="range" id="outputVolume" min="0" max="100" value="100" oninput="updateOutputVolume(this.value)">
                    <span id="outputVolumeValue">100%</span>
                </div>
            </div>

            <div class="voice-controls" id="voiceControls">
                <h4>ğŸ¤ Group Voice Chat</h4>
                <p id="voiceStatus">Connected to voice channel</p>
                <p style="font-size: 11px; opacity: 0.7; margin-top: 5px;">Everyone can hear each other</p>
            </div>

            <div class="users-list" id="usersList">
                <div style="text-align: center; opacity: 0.6; margin-top: 30px;">
                    Join a room to see other users
                </div>
            </div>
        </div>

        <div class="main-content" id="mainContent">
            <div class="header">
                <div class="header-info">
                    <h3 id="roomTitle">Welcome to MemoChat</h3>
                    <small id="roomSubtitle">Enter your name to get started</small>
                </div>
                <div class="controls">
                    <button class="btn btn-success" id="micBtn" onclick="toggleMic()" disabled>
                        ğŸ¤ Mic
                    </button>
                    <button class="btn btn-primary" id="screenBtn" onclick="toggleScreenShare()" disabled>
                        ğŸ“º Screen
                    </button>
                    <button class="btn btn-danger" id="leaveBtn" onclick="leaveRoom()" disabled>
                        ğŸšª Leave
                    </button>
                </div>
            </div>

            <div class="content-area" id="contentArea" style="display: none;">
                <div class="video-section">
                    <div class="video-grid" id="videoGrid">
                        <div style="display: flex; align-items: center; justify-content: center; height: 200px; opacity: 0.6;">
                            <div style="text-align: center;">
                                <h3 style="font-size: 16px; margin-bottom: 10px;">ğŸ™ï¸ Group Voice Chat</h3>
                                <p style="font-size: 13px;">Everyone in the room can hear each other</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-section">
                    <div class="chat-header">
                        ğŸ’¬ Chat
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message system-message">
                            <div class="message-author">System</div>
                            <div class="message-content">Welcome! Join a room to start chatting.</div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Type a message..." maxlength="500">
                        <button class="chat-send-btn" onclick="sendMessage()">Send</button>
                    </div>
                </div>
            </div>

            <div class="video-grid" id="welcomeScreen">
                <div style="display: flex; align-items: center; justify-content: center; height: 250px; opacity: 0.6;">
                    <div style="text-align: center;">
                        <h3 style="font-size: 18px; margin-bottom: 10px;">ğŸ™ï¸ Group Voice Chat Ready</h3>
                        <p style="font-size: 14px;">Join a room to start talking with friends</p>
                        <p style="margin-top: 15px; font-size: 13px; opacity: 0.8;">
                            âœ¨ Features: Volume controls, Password protection, Screen sharing
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-btn" onclick="toggleMobileView()">
            <span id="mobileNavText">Show Chat</span>
        </button>
    </div>

    <!-- Toast for notifications -->
    <div class="toast" id="toast"></div>

    <div class="connection-status status-disconnected" id="connectionStatus">
        Disconnected
    </div>

    <script src="app.js"></script>
</body>
</html>
